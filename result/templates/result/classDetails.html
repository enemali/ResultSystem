<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdn.tailgrids.com/tailgrids-fallback.css" />
<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

{% include 'navbar.html' %}

<!-- ====== Table Section Start -->

<section class="text-gray-600 body-font px-5">
   <div class="container px-1 mx-auto">
     <div class="flex flex-col text-center w-full">
       <h1 class="sm:text-4xl font-medium title-font text-gray-900"> {{all_class.className}} {{all_class.classArm}}</h1>
       <p class="lg:w-2/3 mx-auto leading-relaxed text-base">Subjects in this class</p>
       <br/>
     </div>
          <!-- subject form -->     
          {% comment %} <div class="container">
            <div class="max-w-xl p-5 mx-auto bg-white rounded-md shadow-sm">
              
              <div class=" grid grid-cols-2 gap-4">
               <div class="mx-2 border-2 border-green-300">
                <div class="text-center">
                  <h1 class=" font-semibold text-gray-700">Add new Subject</h1>
                </div>
                <form action="" method="POST">
                  {% csrf_token %}
                  {{ form.as_p }}
                    <button
                      type="submit"
                      class="w-full px-2 text-white bg-indigo-500 rounded-md  focus:bg-indigo-600 focus:outline-none"
                    >
                      Save New Subject
                    </button>
                  </div>
                </form>
               </div> {% endcomment %}
            
          </div>
     </div>
   <!-- ====== columns -->
  <!---     <div class = "grid grid-cols-3 gap-2" >
       <div>
<!--- student names -->  
     <!---    <table class="table-auto w-full text-left whitespace-no-wrap">
          <thead>
            <tr  >
              <th class="px-4 title-font tracking-wider font-medium text-gray-900 text-sm bg-green-300 rounded-tl rounded-bl">
                Students in {{all_class.className}} {{all_class.classArm}}
              </th>
              <th class="px-4 title-font tracking-wider font-medium text-gray-900 text-sm bg-green-300 rounded-tl rounded-bl">
                Delete
              </th>
            </tr>
          </thead>
          <tbody>
            {% for student in students %}
            <tr>
              <td class="px-4 border-2 border-green-300 hover:bg-yellow-300"> 
                {{ student.last_name }} {{ student.first_name }} {{ student.middle_name }}
              </td>

              <td class="px-4 border-2 border-green-300 hover:bg-yellow-300"> 
                {{ student.className}} {{ student.classArm }}
                {% comment %} <a href="{% url 'result:studentDelete' student.id %}">  Delete   </a> {% endcomment %}
              </td> 
            </tr>
            {% endfor %}
              
          </tbody>
        </table>  -->  
       </div>
<!--- subjects  --> 
       <div class = "col-span-2">
        <table class="table-auto w-auto text-left whitespace-no-wrap ">
          <thead>
            <tr  >
              <th class="px-4 title-font tracking-wider font-medium text-gray-900 text-sm bg-green-300 rounded-tl rounded-bl">Subjects</th>
              <th class="px-4 title-font tracking-wider font-medium text-gray-900 text-sm bg-green-300">Students <br>in Class</th>
              <th class="px-4 title-font tracking-wider font-medium text-gray-900 text-sm bg-green-300">Students <br> in Subject</th>
              <th class="px-4 title-font tracking-wider font-medium text-gray-900 text-sm bg-green-300">1st CA<br>Entries</th>
              <th class="px-4 title-font tracking-wider font-medium text-gray-900 text-sm bg-green-300">2nd CA <br>Entries</th>
              <th class="px-4 title-font tracking-wider font-medium text-gray-900 text-sm bg-green-300">Exam <br>Entries</th>
              <th class="px-4 title-font tracking-wider font-medium text-gray-900 text-sm bg-green-300 rounded-tr rounded-br">Subject Teacher</th>
              <th class="px-4 title-font tracking-wider font-medium text-gray-900 text-sm bg-green-300 rounded-tr rounded-br">Score Entry</th>
            </tr>
          </thead>
          <tbody>
            {% for subject in firstCAEntry %}
            <tr>
              <td class="px-4 border-2 border-green-300"> {{ subject.subjectName }} </td>
              <td class="px-4 border-2 border-green-300"> {{ students.count }} </td>
              {% if subject.student_Count == students.count %}
              <td class="px-4 border-2 border-green-300"> {{ subject.student_Count}} </td>
              {% else %}
              <td class="px-4 border-2 border-green-300 bg-purple-300"> {{ subject.student_Count}} </td>
              {% endif %}
          
              {% if subject.firstCa_Count > 0 and subject.firstCa_Count < students.count %}
                  <td class="px-4 border-2 border-green-300 bg-purple-300">{{ subject.firstCa_Count }} </td>
              {% elif subject.firstCa_Count == 0 %}
                  <td class="px-4 border-2 border-green-300 bg-red-300">{{ subject.firstCa_Count }} </td>
              {% else %}
                  <td class="px-4 border-2 border-green-300">{{ subject.firstCa_Count }} </td>
              {% endif %}

              {% if subject.secondCa_Count > 0 and subject.secondCa_Count < students.count %}
                  <td class="px-4 border-2 border-green-300 bg-purple-300">{{ subject.secondCa_Count }} </td>
              {% elif subject.secondCa_Count == 0 %}
                  <td class="px-4 border-2 border-green-300 bg-red-300">{{ subject.secondCa_Count }} </td>
              {% else %}
                  <td class="px-4 border-2 border-green-300">{{ subject.secondCa_Count }} </td>
              {% endif %}

              {% if subject.exam_Count > 0 and subject.exam_Count < students.count %}
                  <td class="px-4 border-2 border-green-300 bg-purple-300">{{ subject.exam_Count }} </td>
              {% elif subject.exam_Count == 0 %}
                  <td class="px-4 border-2 border-green-300 bg-red-300">{{ subject.exam_Count }} </td>
              {% else %}
                  <td class="px-4 border-2 border-green-300">{{ subject.exam_Count }} </td>
              {% endif %}
              <td class="px-4 border-2 border-green-300"> {{ subject.subjectTeacher }} </td>
              <td class="px-0 border-2 border-green-300 "> 
                <a href="{% url 'result:subjectDetails' subject.id %}"> 
                  <button class="bg-green-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                    Start Entry
                  </button>
                </a> 

              </td>
            </tr>
            {% endfor %}
              
          </tbody>
        </table>
       </div>
     </div>
     
   </div>
 </section>
 
<!-- ====== Table Section End -->